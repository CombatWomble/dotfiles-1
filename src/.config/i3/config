################
# VARIABLES
################

	set $super Mod4
	set $alt Mod1

	set $0 temp
	set $1 web
	set $2 dev
	set $3 sync
	set $4 hack
	set $5 files
	set $6 media
	set $7 literature
	set $8 games
	set $9 run
	set $10 chat
	set $11 lab
	set $12 monitor

	set $wsTemp 0| temp
	set $wsWeb 1| web
	set $wsDev 2| dev
	set $wsSync 3| sync
	set $wsHack 4| hack
	set $wsFiles 5| files
	set $wsMedia 6| media
	set $wsLiterature 7| literature
	set $wsGames 8| games
	set $wsRun 9| run
	set $wsChat 10| chat
	set $ws11 11| lab
	set $wsMonitor 12| monitor

	set $macro1 XF86Tools
	set $macro2 XF86Launch5
	set $macro3 XF86Launch6
	set $macro4 XF86Launch7
	set $macro5 XF86Launch8

	# return to the default mode
	set $return mode "default"

	# default apps
	set $chooseCommand rofi -show run -sidebar-mode -i
	set $chooseWindow rofi -show window -sidebar-mode -i
	set $chooseApp j4-dmenu-desktop --dmenu='rofi -dmenu -p "launch:" -i'
	set $terminal i3-sensible-terminal
	set $run i3-sensible-terminal -e
	set $tmux i3-sensible-terminal -e tmux -2
	set $tmuxAttach i3-sensible-terminal -e tmux -2 new-session -A -s
	set $locker i3lock --color=5f00af
	set $locker2 escrotum /tmp/lockscreen.png && i3lock -i /tmp/lockscreen.png

	# UI
	set $borderWidth 2
	set $borderFloatingWidth 4

	# paths
	set $wallpaperPath ~/Dropbox/media/images/wallpaper


################
# OPTIONS
################

	font pango:Fantasque Sans Mono, Icons 14

	workspace_layout stacking
	workspace_auto_back_and_forth no

	# Use Mouse+$super to drag floating windows to their wanted position
	floating_modifier $super

	# Don't follow mouse focus
	focus_follows_mouse no

	# window borders
	new_window pixel $borderWidth
	new_float pixel $borderFloatingWidth

	mouse_warping none


################
# BINDS
################

	# close focused window
	bindsym $super+c kill
	bindsym $super+Shift+c exec $run xkill

	# change focus between tiling / floating windows
	bindsym $super+Tab focus mode_toggle

	# open terminal
	bindsym $super+t exec $terminal
	bindsym $super+Shift+t exec $tmux

	# open runner
	bindsym $super+r exec $chooseCommand

	# open window finder
	bindsym $super+w exec $chooseWindow

	# open launcher
	bindsym $super+o exec --no-startup-id $chooseApp

	# fix keys
	# TODO: this does not work
	bindsym $macro1 exec ~/bin/keys init

	# fix monitors
	bindsym $macro2 exec ~/local/lib/mon.sh

	# lock screen
	bindsym $macro5 exec $locker
	bindsym Shift+$macro5 exec $locker2

	# change focus
	bindsym $super+h focus left
	bindsym $super+j focus down
	bindsym $super+k focus up
	bindsym $super+l focus right

	# move focused window/container
	bindsym $super+Shift+h move left
	bindsym $super+Shift+j move down
	bindsym $super+Shift+k move up
	bindsym $super+Shift+l move right

	# focus next/previous workspace on current output
	bindsym $super+n workspace next_on_output
	bindsym $super+p workspace prev_on_output

	# move container to next/previous workspace
	bindsym $super+Shift+n move to workspace next_on_output
	bindsym $super+Shift+p move to workspace prev_on_output

	# focus next/previous workspace
	bindsym $super+f workspace next
	bindsym $super+b workspace prev

	# move window to next/previous workspace
	bindsym $super+Shift+f move to workspace next
	bindsym $super+Shift+b move to workspace prev

	# focus left/right output
	bindsym $super+u focus output left
	bindsym $super+d focus output right

	# move workspace to left/right output
	bindsym $super+Shift+u move workspace to output left
	bindsym $super+Shift+d move workspace to output right

	# back to last workspace
	bindsym $super+Escape workspace back_and_forth
	bindsym $super+Shift+Escape move to workspace back_and_forth; workspace back_and_forth

	# switch to workspace
	bindsym $super+1 workspace $wsWeb
	bindsym $super+2 workspace $wsDev
	bindsym $super+3 workspace $wsSync
	bindsym $super+4 workspace $wsHack
	bindsym $super+5 workspace $wsFiles
	bindsym $super+6 workspace $wsMedia
	bindsym $super+7 workspace $wsLiterature
	bindsym $super+8 workspace $wsGames
	bindsym $super+9 workspace $wsRun
	bindsym $super+0 workspace $wsChat
	bindsym $super+bracketleft workspace $ws11
	bindsym $super+bracketright workspace $wsMonitor
	bindsym $super+grave workspace $wsTemp

	# move focused container to workspace
	bindsym $super+Shift+1 move container to workspace $wsWeb; workspace $wsWeb
	bindsym $super+Shift+2 move container to workspace $wsDev; workspace $wsDev
	bindsym $super+Shift+3 move container to workspace $wsSync; workspace $wsSync
	bindsym $super+Shift+4 move container to workspace $wsHack; workspace $wsHack
	bindsym $super+Shift+5 move container to workspace $wsFiles; workspace $wsFiles
	bindsym $super+Shift+6 move container to workspace $wsMedia; workspace $wsMedia
	bindsym $super+Shift+7 move container to workspace $wsLiterature; workspace $wsLiterature
	bindsym $super+Shift+8 move container to workspace $wsGames; workspace $wsGames
	bindsym $super+Shift+9 move container to workspace $wsRun; workspace $wsRun
	bindsym $super+Shift+0 move container to workspace $wsChat; workspace $wsChat
	bindsym $super+Shift+bracketleft move container to workspace $ws11; workspace $ws11
	bindsym $super+Shift+bracketright move container to workspace $wsMonitor; workspace $wsMonitor
	bindsym $super+Shift+grave move container to workspace $wsTemp; workspace $wsTemp

	# focus the parent/child container
	bindsym $super+z focus parent
	bindsym $super+Shift+z focus child

	# show scratchpad
	bindsym $super+s scratchpad show
	# move the currently focused window to the scratchpad
	bindsym $super+Shift+s move scratchpad

	# modes
	bindsym $super+space mode "PREFIX"
	bindsym $super+m mode "MARK"
	bindsym $super+apostrophe mode "GOTO"
	# TODO: [y] yank
	# TODO: [p] paste
	# TODO: [q], [@] macros
	# TODO: [f] focus (or maybe [/])


################
# MEDIA
################

	set $refreshI3Media pkill -RTMIN+11 i3blocks

	# volume
	bindsym XF86AudioRaiseVolume exec "~/bin/config volume +5; $refreshI3Media"
	bindsym XF86AudioLowerVolume exec "~/bin/config volume -5; $refreshI3Media"
	bindsym XF86AudioMute exec "~/bin/config volume !; $refreshI3Media"

	# playback
	bindsym XF86AudioPlay exec "playerctl play-pause; $refreshI3Media"
	bindsym XF86AudioNext exec "playerctl next; $refreshI3Media"
	bindsym XF86AudioPrev exec "playerctl previous; $refreshI3Media"

	# brightness
	bindsym XF86MonBrightnessUp exec ~/bin/config brightness +5
	bindsym XF86MonBrightnessDown exec ~/bin/config brightness -5

	# toggle touchpad
	bindsym XF86AudioMicMute exec "~/bin/config touchpad !"

	# fix monitors
	bindsym XF86Display exec ~/local/bin/mon

	# fix keys
	# NOTE: this points to the same thing as $macro1
	# bindsym XF86Tools exec ~/bin/keys init

	bindsym XF86Search exec --no-startup-id google-chrome-unstable

	# app launcher
	bindsym XF86LaunchA exec --no-startup-id $chooseApp

	# file explorer
	bindsym XF86Explorer exec vifm

	# touchscreen
	bindsym XF86TouchpadToggle exec "~/bin/config touchpad !"

	# web browser
	bindsym XF86HomePage exec --no-startup-id google-chrome-unstable

	# screenshots
	bindsym Print exec "~/bin/screenshot"
	bindsym $alt+Print exec "~/bin/screenshot window"
	bindsym Control+Shift+Print exec "~/bin/screenshot select"


################
# MODES
################

	mode "PREFIX" {
		bindsym apostrophe mode "GOTO"
		bindsym a mode "APPS"
		bindsym b mode "BUFFER"
		bindsym i mode "I3"
		bindsym l mode "LAYOUT"
		bindsym m mode "MEDIA"
		bindsym Shift+m mode "MOUSE"
		bindsym p mode "PROJECTS"
		bindsym r mode "RESIZE"
		bindsym Shift+r mode "MOVE"
		bindsym s mode "SYSTEM"
		bindsym t mode "TMUX"

		bindsym Shift+p mode "PIDGIN"

		bindsym $super+space $return
		bindsym Escape $return
	}


	mode "BUFFER" {
		bindsym c kill; $return

		bindsym $super+space mode "PREFIX"
		bindsym Escape $return
	}


	mode "MARK" {
		# by name
			bindsym space exec i3-input -F 'mark %s' -P 'Mark name: '; $return

		# by number
			bindsym grave mark mark-0; $return
			bindsym 1 mark mark-1; $return
			bindsym 2 mark mark-2; $return
			bindsym 3 mark mark-3; $return
			bindsym 4 mark mark-4; $return
			bindsym 5 mark mark-5; $return
			bindsym 6 mark mark-6; $return
			bindsym 7 mark mark-7; $return
			bindsym 8 mark mark-8; $return
			bindsym 9 mark mark-9; $return
			bindsym 0 mark mark-10; $return
			bindsym bracketleft mark mark-11; $return
			bindsym bracketright mark mark-12; $return

			bindsym Shift+grave unmark mark-0; $return
			bindsym Shift+1 unmark mark-1; $return
			bindsym Shift+2 unmark mark-2; $return
			bindsym Shift+3 unmark mark-3; $return
			bindsym Shift+4 unmark mark-4; $return
			bindsym Shift+5 unmark mark-5; $return
			bindsym Shift+6 unmark mark-6; $return
			bindsym Shift+7 unmark mark-7; $return
			bindsym Shift+8 unmark mark-8; $return
			bindsym Shift+9 unmark mark-9; $return
			bindsym Shift+0 unmark mark-10; $return
			bindsym Shift+bracketleft unmark mark-11; $return
			bindsym Shift+bracketright unmark mark-12; $return

		# by letter
			bindsym a mark mark-a; $return
			bindsym b mark mark-b; $return
			# bindsym c mark mark-c; $return
			bindsym d mark mark-d; $return
			# bindsym e mark mark-e; $return
			# bindsym f mark mark-f; $return
			bindsym g mark mark-g; $return
			bindsym h mark mark-h; $return
			bindsym i mark mark-i; $return
			bindsym j mark mark-j; $return
			bindsym k mark mark-k; $return
			bindsym l mark mark-l; $return
			# bindsym m mark mark-m; $return
			bindsym n mark mark-n; $return
			bindsym o mark mark-o; $return
			bindsym p mark mark-p; $return
			bindsym q mark mark-q; $return
			bindsym r mark mark-r; $return
			bindsym s mark mark-s; $return
			bindsym t mark mark-t; $return
			bindsym u mark mark-u; $return
			# bindsym v mark mark-v; $return
			# bindsym w mark mark-w; $return
			bindsym x mark mark-x; $return
			bindsym y mark mark-y; $return
			bindsym z mark mark-z; $return

			bindsym Shift+a unmark mark-a; $return
			bindsym Shift+b unmark mark-b; $return
			# bindsym Shift+c unmark mark-c; $return
			bindsym Shift+d unmark mark-d; $return
			# bindsym Shift+e unmark mark-e; $return
			# bindsym Shift+f unmark mark-f; $return
			bindsym Shift+g unmark mark-g; $return
			bindsym Shift+h unmark mark-h; $return
			bindsym Shift+i unmark mark-i; $return
			bindsym Shift+j unmark mark-j; $return
			bindsym Shift+k unmark mark-k; $return
			bindsym Shift+l unmark mark-l; $return
			# bindsym Shift+m unmark mark-m; $return
			bindsym Shift+n unmark mark-n; $return
			bindsym Shift+o unmark mark-o; $return
			bindsym Shift+p unmark mark-p; $return
			bindsym Shift+q unmark mark-q; $return
			bindsym Shift+r unmark mark-r; $return
			bindsym Shift+s unmark mark-s; $return
			bindsym Shift+t unmark mark-t; $return
			bindsym Shift+u unmark mark-u; $return
			# bindsym Shift+v unmark mark-v; $return
			# bindsym Shift+w unmark mark-w; $return
			bindsym Shift+x unmark mark-x; $return
			bindsym Shift+y unmark mark-y; $return
			bindsym Shift+z unmark mark-z; $return

		# reserved
			bindsym c exec notify-send "Reserved: chat"; $return
			bindsym e exec notify-send "Reserved: editor"; $return
			bindsym f exec notify-send "Reserved: files"; $return
			bindsym m exec notify-send "Reserved: music"; $return
			bindsym v exec notify-send "Reserved: video"; $return
			bindsym w exec notify-send "Reserved: web"; $return

		# exit
			bindsym $super+space mode "PREFIX"
			bindsym Escape $return
	}


	mode "GOTO" {
		# by symbol
			bindsym space [urgent=latest] focus; $return
			bindsym apostrophe [urgent=latest] focus; $return
			bindsym $super+apostrophe [urgent=latest] focus; $return

		# by name
			bindsym Return exec i3-input -F '[con_mark=%s] focus' -P 'Go to mark: '; $return

		# by number
			bindsym grave [con_mark="mark-0"] focus; $return
			bindsym 1 [con_mark="mark-1"] focus; $return
			bindsym 2 [con_mark="mark-2"] focus; $return
			bindsym 3 [con_mark="mark-3"] focus; $return
			bindsym 4 [con_mark="mark-4"] focus; $return
			bindsym 5 [con_mark="mark-5"] focus; $return
			bindsym 6 [con_mark="mark-6"] focus; $return
			bindsym 7 [con_mark="mark-7"] focus; $return
			bindsym 8 [con_mark="mark-8"] focus; $return
			bindsym 9 [con_mark="mark-9"] focus; $return
			bindsym 0 [con_mark="mark-10"] focus; $return
			bindsym bracketleft [con_mark="mark-11"] focus; $return
			bindsym bracketright [con_mark="mark-12"] focus; $return

		# by letter
			bindsym a [con_mark="mark-a"] focus; $return
			bindsym b [con_mark="mark-b"] focus; $return
			# bindsym c [con_mark="mark-c"] focus; $return
			bindsym d [con_mark="mark-d"] focus; $return
			# bindsym e [con_mark="mark-e"] focus; $return
			# bindsym f [con_mark="mark-f"] focus; $return
			bindsym g [con_mark="mark-g"] focus; $return
			bindsym h [con_mark="mark-h"] focus; $return
			bindsym i [con_mark="mark-i"] focus; $return
			bindsym j [con_mark="mark-j"] focus; $return
			bindsym k [con_mark="mark-k"] focus; $return
			bindsym l [con_mark="mark-l"] focus; $return
			# bindsym m [con_mark="mark-m"] focus; $return
			bindsym n [con_mark="mark-n"] focus; $return
			bindsym o [con_mark="mark-o"] focus; $return
			bindsym p [con_mark="mark-p"] focus; $return
			bindsym q [con_mark="mark-q"] focus; $return
			bindsym r [con_mark="mark-r"] focus; $return
			bindsym s [con_mark="mark-s"] focus; $return
			bindsym t [con_mark="mark-t"] focus; $return
			bindsym u [con_mark="mark-u"] focus; $return
			# bindsym v [con_mark="mark-v"] focus; $return
			# bindsym w [con_mark="mark-w"] focus; $return
			bindsym x [con_mark="mark-x"] focus; $return
			bindsym y [con_mark="mark-y"] focus; $return
			bindsym z [con_mark="mark-z"] focus; $return

		# by app
			# chat
			bindsym c [title="(Buddy List|finch)"] focus; $return
			# editor
			bindsym e [class="URxvt" title="VIM"] focus; $return
			# files
			bindsym f [class="URxvt" title="vifm"] focus; $return
			# music
			bindsym m [title="(?i)music"] focus; $return
			# video
			bindsym v [class="vlc"] focus; $return
			# web
			bindsym w [class="Google-chrome"] focus; $return

		bindsym $super+space mode "PREFIX"
		bindsym Escape $return
	}


	mode "I3" {
		# reload the configuration file
		bindsym space reload; $return
		# restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
		bindsym r restart; $return
		# exit i3 (logs you out of your X session)
		bindsym q exec "i3-nagbar -t warning -m 'You pressed the exit shortcut. Do you really want to exit i3? This will end your X session.' -b 'Yes, exit i3' 'i3-msg exit'"; $return

		bindsym $super+space mode "PREFIX"
		bindsym Escape $return
	}


	mode "TMUX" {
		# by name
			bindsym space exec i3-input -P 'Session name: ' -F 'exec $tmuxAttach %s'; $return

		# presets
			# TODO: make these dynamic from the workspace name
			bindsym grave        workspace $wsTemp;  exec $tmuxAttach $0;  $return
			bindsym 1            workspace $wsWeb;  exec $tmuxAttach $1;  $return
			bindsym 2            workspace $wsDev;  exec $tmuxAttach $2;  $return
			bindsym 3            workspace $wsSync;  exec $tmuxAttach $3;  $return
			bindsym 4            workspace $wsHack;  exec $tmuxAttach $4;  $return
			bindsym 5            workspace $wsFiles;  exec $tmuxAttach $5 'vifm';  $return
			bindsym 6            workspace $wsMedia;  exec $tmuxAttach $6;  $return
			bindsym 7            workspace $wsLiterature;  exec $tmuxAttach $7;  $return
			bindsym 8            workspace $wsGames;  exec $tmuxAttach $8;  $return
			bindsym 9            workspace $wsRun;  exec $tmuxAttach $9;  $return
			bindsym 0            workspace $wsChat; exec $tmuxAttach $10; $return
			bindsym bracketleft  workspace $ws11; exec $tmuxAttach $11; $return
			bindsym bracketright workspace $wsMonitor; exec $tmuxAttach $12; $return

		# TODO: open preset for the current workspace

		bindsym $super+space mode "PREFIX"
		bindsym Escape $return
	}


	mode "SYSTEM" {
		bindsym Shift+r exec "reboot"; $return
		bindsym Shift+p exec "poweroff"; $return
		bindsym Shift+s exec "systemctl suspend"; $return
		bindsym Shift+h exec "systemctl hybernate"; $return

		# lock screen
		bindsym l exec $locker; $return
		bindsym Shift+l exec $locker2; $return

		bindsym k exec ~/bin/config brightness +20; $return
		bindsym j exec ~/bin/config brightness -20; $return
		bindsym Shift+k exec ~/bin/config brightness +20
		bindsym Shift+j exec ~/bin/config brightness -20

		bindsym Control+k exec ~/bin/config brightness +80; $return
		bindsym Control+j exec ~/bin/config brightness -80; $return
		bindsym Control+Shift+k exec ~/bin/config brightness +80
		bindsym Control+Shift+j exec ~/bin/config brightness -80

		bindsym $alt+k exec ~/bin/config brightness +5; $return
		bindsym $alt+j exec ~/bin/config brightness -5; $return
		bindsym $alt+Shift+k exec ~/bin/config brightness +5
		bindsym $alt+Shift+j exec ~/bin/config brightness -5

		bindsym $super+space mode "PREFIX"
		bindsym Escape $return
	}


	mode "RESIZE" {
		# small
		bindsym $alt+h resize shrink width 1 px or 1 ppt
		bindsym $alt+j resize grow height 1 px or 1 ppt
		bindsym $alt+k resize shrink height 1 px or 1 ppt
		bindsym $alt+l resize grow width 1 px or 1 ppt
		# medium
		bindsym h resize shrink width 4 px or 4 ppt
		bindsym j resize grow height 4 px or 4 ppt
		bindsym k resize shrink height 4 px or 4 ppt
		bindsym l resize grow width 4 px or 4 ppt
		# large
		bindsym Shift+h resize shrink width 16 px or 16 ppt
		bindsym Shift+j resize grow height 16 px or 16 ppt
		bindsym Shift+k resize shrink height 16 px or 16 ppt
		bindsym Shift+l resize grow width 16 px or 16 ppt
		# bigger
		bindsym Control+h resize shrink width 32 px or 32 ppt
		bindsym Control+j resize grow height 32 px or 32 ppt
		bindsym Control+k resize shrink height 32 px or 32 ppt
		bindsym Control+l resize grow width 32 px or 32 ppt
		# extreme
		bindsym Control+Shift+h resize shrink width 64 px or 64 ppt
		bindsym Control+Shift+j resize grow height 64 px or 64 ppt
		bindsym Control+Shift+k resize shrink height 64 px or 64 ppt
		bindsym Control+Shift+l resize grow width 64 px or 64 ppt

		bindsym space move right; resize shrink width 36 px or 36 ppt

		bindsym $super+space mode "PREFIX"
		bindsym Escape $return
	}


	mode "MOVE" {
		# small
		bindsym $alt+h move left 1 px
		bindsym $alt+j move down 1 px
		bindsym $alt+k move up 1 px
		bindsym $alt+l move right 1 px
		# medium
		bindsym h move left 4 px
		bindsym j move down 4 px
		bindsym k move up 4 px
		bindsym l move right 4 px
		# large
		bindsym Shift+h move left 16 px
		bindsym Shift+j move down 16 px
		bindsym Shift+k move up 16 px
		bindsym Shift+l move right 16 px
		# bigger
		bindsym Control+h move left 32 px
		bindsym Control+j move down 32 px
		bindsym Control+k move up 32 px
		bindsym Control+l move right 32 px
		# extreme
		bindsym Control+Shift+h move left 64 px
		bindsym Control+Shift+j move down 64 px
		bindsym Control+Shift+k move up 64 px
		bindsym Control+Shift+l move right 64 px

		bindsym $super+space mode "PREFIX"
		bindsym Escape $return
	}


	mode "LAYOUT" {
		bindsym grave layout default; $return
		bindsym 1 layout tabbed; $return
		bindsym 2 layout stacking; $return
		bindsym 3 layout splith; $return
		bindsym 4 layout splitv; $return

		# split down
		bindsym j split vertical; $return
		# split up (but really down)
		bindsym k split vertical; $return
		# split left (but really right)
		bindsym h split horizontal; $return
		# split right
		bindsym l split horizontal; $return

		# toggle [stacking, tabbed, splith, splitv]
		bindsym a layout toggle all; $return
		# toggle [splith, splitv]
		bindsym s layout toggle split; $return
		# toggle [stacking, tabbed, split]
		bindsym t layout toggle; $return
		# toggle fullscreen
		bindsym f fullscreen; $return
		bindsym Shift+f fullscreen global; $return
		# toggle [floating, tiled]
		bindsym space floating toggle; $return

		# borders
		bindsym b mode "BORDER"

		bindsym $super+space mode "PREFIX"
		bindsym Escape $return
	}


	mode "BORDER" {
		# cycle through border styles
		bindsym space border toggle; $return

		bindsym 0 border none; $return
		bindsym 1 border 1pixel; $return
		bindsym 2 border normal; $return

		bindsym $super+space mode "PREFIX"
		bindsym Escape $return
	}


	mode "MOUSE" {
		# buttons
			# left
			bindsym space exec $(xdotool click 1)
			# middle
			bindsym $alt+space exec $(xdotool click 2)
			# right
			bindsym Shift+space exec $(xdotool click 3)
			# wheel up
			bindsym b exec $(xdotool click 4)
			# wheel down
			bindsym f exec $(xdotool click 5)

		# movement
			# slow
			bindsym $alt+h exec $(xdotool mousemove_relative -- -4  0)
			bindsym $alt+l exec $(xdotool mousemove_relative --  4  0)
			bindsym $alt+j exec $(xdotool mousemove_relative --  0  4)
			bindsym $alt+k exec $(xdotool mousemove_relative --  0 -4)
			# normal
			bindsym h exec $(xdotool mousemove_relative -- -16   0)
			bindsym l exec $(xdotool mousemove_relative --  16   0)
			bindsym j exec $(xdotool mousemove_relative --   0  16)
			bindsym k exec $(xdotool mousemove_relative --   0 -16)
			# fast
			bindsym Shift+h exec $(xdotool mousemove_relative -- -128    0)
			bindsym Shift+l exec $(xdotool mousemove_relative --  128    0)
			bindsym Shift+j exec $(xdotool mousemove_relative --    0  128)
			bindsym Shift+k exec $(xdotool mousemove_relative --    0 -128)
			# turbo
			bindsym Control+h exec $(xdotool mousemove_relative -- -512    0)
			bindsym Control+l exec $(xdotool mousemove_relative --  512    0)
			bindsym Control+j exec $(xdotool mousemove_relative --    0  512)
			bindsym Control+k exec $(xdotool mousemove_relative --    0 -512)

		bindsym $super+space mode "PREFIX"
		bindsym Escape $return
	}


	mode "MEDIA" {
		# volume

		bindsym m exec "~/bin/config volume !; $refreshI3Media"; $return
		bindsym k exec "~/bin/config volume +5; $refreshI3Media"; $return
		bindsym j exec "~/bin/config volume -5; $refreshI3Media"; $return
		bindsym Up exec "~/bin/config volume +10; $refreshI3Media"; $return
		bindsym Down exec "~/bin/config volume -10; $refreshI3Media"; $return
		bindsym Control+k exec "~/bin/config volume +20; $refreshI3Media"; $return
		bindsym Control+j exec "~/bin/config volume -20; $refreshI3Media"; $return


		bindsym Shift+m exec "~/bin/config volume !; $refreshI3Media"
		bindsym Shift+k exec "~/bin/config volume +5; $refreshI3Media"
		bindsym Shift+j exec "~/bin/config volume -5; $refreshI3Media"
		bindsym Shift+Up exec "~/bin/config volume +10; $refreshI3Media"
		bindsym Shift+Down exec "~/bin/config volume -10; $refreshI3Media"
		bindsym Control+Shift+k exec "~/bin/config volume +20; $refreshI3Media"
		bindsym Control+Shift+j exec "~/bin/config volume -20; $refreshI3Media"

		# playback

		bindsym space exec $(xdotool key XF86AudioPlay); $return
		bindsym l exec $(xdotool key XF86AudioNext); $return
		bindsym Right exec $(xdotool key XF86AudioNext); $return
		bindsym h exec $(xdotool key XF86AudioPrev); $return
		bindsym Left exec $(xdotool key XF86AudioPrev); $return

		bindsym Shift+space exec $(xdotool key XF86AudioPlay)
		bindsym Shift+l exec $(xdotool key XF86AudioNext)
		bindsym Shift+Right exec $(xdotool key XF86AudioNext)
		bindsym Shift+h exec $(xdotool key XF86AudioPrev)
		bindsym Shift+Left exec $(xdotool key XF86AudioPrev)


		# screenshots

		bindsym y exec "~/bin/screenshot"; $return
		bindsym $alt+y exec "~/bin/screenshot window"; $return
		bindsym Shift+y exec "~/bin/screenshot select"; $return

		bindsym $super+space mode "PREFIX"
		bindsym Escape $return
	}


	mode "PROJECTS" {
		bindsym space exec i3-input -P 'Open project: ' -F 'exec ~/bin/tp %s'; $return
		bindsym Shift+space exec i3-input -P 'Open project: ' -F 'exec ~/bin/tp %s'; $return

		bindsym $super+space mode "PREFIX"
		bindsym Escape $return
	}


	mode "APPS" {
		# clipboard manager -- copyq
		# TODO: move to scratchpad
		bindsym y exec copyq toggle; $return

		# calculator -- Qalc
		# TODO: move to scratchpad
		bindsym c exec qalculate-gtk; $return

		# password manager -- KeePassX
		bindsym k exec keepassx; $return

		# documentation -- zeal
		bindsym --release d exec $(xdotool key --clearmodifiers "alt+super+shift+Z"); $return

		bindsym $super+space mode "PREFIX"
		bindsym Escape $return
	}


	mode "PIDGIN" {
		bindsym space exec python3 ~/lib/purple.py | sort | rofi -dmenu -p "IM:" -i | xargs -I$ python3 ~/lib/purple.py "$"; $return

		bindsym $super+space mode "PREFIX"
		bindsym Escape $return
	}


################
# THEME
################

	# class                 border  bg      text    indicator
	client.focused          #5f00af #875fd7 #ffffff #5f00af
	client.focused_inactive #666666 #151515 #ffffff #292d2e
	client.unfocused        #666666 #151515 #ffffff #292d2e
	client.urgent           #ffaf00 #ff5f00 #ffffff #900000


################
# STATUSBAR
################

	bar {
		position top
		workspace_buttons yes
		mode dock
		tray_output primary

		status_command i3blocks -c $HOME/.config/i3/i3blocks.conf

		colors {
			background #151515
			statusline #ffffff
			separator #875fd7

			# class            border  bg      text
			focused_workspace  #875fd7 #5f00af #ffffff
			inactive_workspace #151515 #151515 #ffffff
			active_workspace   #5f00af #875fd7 #ffffff
			urgent_workspace   #ffaf00 #ff5f00 #ffffff
		}
	}


################
# WORKSPACES
################

	# TODO: handle the fact that different computers have different xrandr setups...


################
# APPS
################

	# dialogs
	for_window [window_role="pop-up"] floating enable, move absolute center
	for_window [title="Qalculate!"] floating enable
	for_window [class="^Gpick|Pavucontrol$"] floating enable
	for_window [class="^Copyq$"] border pixel 0, floating enable

	# web
	assign [class="^google-chrome" window_role="browser"] → $wsWeb

	# media
	assign [class="(nuvolaplayer|Spotify|Vlc)"] → $wsMedia
	assign [title="Popcorn Time"] → $wsMedia
	assign [title="Google Play Music" window_role="pop-up"] → $wsMedia
	for_window [class="Vlc"] border none
	for_window [title="Google Play Music" window_role="pop-up"] floating disable, move to workspace $wsMedia

	# literature
	assign [title="Google Keep"] → $wsLiterature

	# games
	for_window [title="Dota 2"] border none

	# chat
	assign [class="Pidgin" window_role="(buddy_list|conversation)"] → $wsChat
	assign [title="^finch$"] → $wsChat
	assign [title="^plaidchat$"] → $wsChat

	# monitor
	assign [class="robomongo"] → $wsMonitor


################
# STARTUP
################

	# layouts
	exec --no-startup-id "i3-msg 'workspace $wsChat; append_layout ~/.config/i3/layouts/workspace-10.json'"

	# wallpaper
	exec --no-startup-id feh --recursive --randomize --bg-scale $wallpaperPath

	# autolock
	exec --no-startup-id xautolock -time 10 -locker $locker
